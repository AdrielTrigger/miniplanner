(()=>{"use strict";function e(e,t){t.style.setProperty("display","none"),e.style.setProperty("display","flex")}function t(e,t,n){let l=document.createElement("div");l.innerHTML=e;let s=document.createElement("button");s.innerHTML="Delete",s.classList.add("deletion"),l.appendChild(s),s.addEventListener("click",(()=>{t.removeChild(l)})),l.setAttribute("id",n),t.appendChild(l)}function n(e,n){for(let l=0;l<e.length;l++)t(e[l].name,n,l+1)}const l=window.require("fs");function s(e){let t=JSON.stringify(e);l.writeFile("list.json",t,(e=>{if(e)throw e}))}function i(){if(l.existsSync("./list.json")){let e=l.readFileSync("./list.json");return JSON.parse(e)}}class r{constructor(e){this.name=e}setName(e){this.name=e}}const a=document.getElementById("new-task"),c=document.querySelector("form"),d=document.getElementById("task-name"),o=document.getElementById("cancel-task"),u=document.querySelector(".task-list");var m=[];i()&&(!function(e,t){if(e)for(let n=0;n<e.length;n++){let l=e[n].name,s=new r(l);t.push(s)}}(i(),m),n(m,u)),a.addEventListener("click",(()=>{var e;e=a,c.style.setProperty("display","flex"),e.style.setProperty("display","none")})),c.addEventListener("submit",(n=>{n.preventDefault(),""!=d.value&&(m.push(new r(d.value)),s(m),t(d.value,u,m.length),e(a,c)),d.value=""})),o.addEventListener("click",(t=>{t.preventDefault(),e(a,c),d.value=""})),u.addEventListener("click",(e=>{e.target&&e.target.classList.contains("deletion")&&(m.splice(e.target.parentElement.id-1,1),s(m),u.innerHTML="",n(m,u))}))})();